<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>留言板</title>
</head>
<body>
<h1>留言板</h1>
<form id="messageForm">
  <label for="name">姓名：</label>
  <input type="text" id="name" required><br><br>
  <label for="message">留言内容：</label><br>
  <textarea id="message" cols="30" rows="5" required></textarea><br><br>
  <button type="submit">提交留言</button>
</form>
<div id="messages"></div>

<script>
let messages = [];

document.getElementById('messageForm').addEventListener('submit', function(e) {
  e.preventDefault();
  let name = document.getElementById('name').value;
  let message = document.getElementById('message').value;
  let now = new Date();
  let timestamp = now.toUTCString();
  let data = { name: name, message: message, timestamp: timestamp };
  messages.push(data);
  displayMessages();
  saveMessages();
  document.getElementById('messageForm').reset();
});

function displayMessages() {
  document.getElementById('messages').innerHTML = '';
  messages.forEach(function(data) {
    let message = `<strong>${data.name}</strong> - ${data.timestamp}: ${data.message}<hr>`;
    document.getElementById('messages').innerHTML += message;
  });
}

function saveMessages() {
  localStorage.setItem('messages', JSON.stringify(messages));
}

function loadMessages() {
  let storedMessages = localStorage.getItem('messages');
  if (storedMessages) {
    messages = JSON.parse(storedMessages);
    displayMessages();
  }
}

loadMessages();
</script>
</body>
</html>
